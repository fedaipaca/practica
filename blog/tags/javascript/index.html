<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">2 posts tagged with &quot;javascript&quot; | Practica.js</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://practica.dev/blog/tags/javascript"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="2 posts tagged with &quot;javascript&quot; | Practica.js"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://practica.dev/blog/tags/javascript"><link data-rh="true" rel="alternate" href="https://practica.dev/blog/tags/javascript" hreflang="en"><link data-rh="true" rel="alternate" href="https://practica.dev/blog/tags/javascript" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Practica.js RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Practica.js Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-71456305-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.aebdace5.css">
<link rel="preload" href="/assets/js/runtime~main.aa07f8b2.js" as="script">
<link rel="preload" href="/assets/js/main.4dff6f49.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/practica.png" alt="Practica.js Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/practica.png" alt="Practica.js Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Practica.js</b></a><a href="https://www.youtube.com/channel/UCKrSJ0-jm7YVTM_hO7Me9eA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">YouTube</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/practicajs/practica" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/about-the-sweet-and-powerful-use-case-code-pattern">About the sweet and powerful &#x27;use case&#x27; code pattern</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/a-compilation-of-outstanding-testing-articles-with-javaScript">A compilation of outstanding testing articles (with JavaScript)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/testing-the-dark-scenarios-of-your-nodejs-application">Testing the dark scenarios of your Node.js application</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/practica-v0.0.6-is-alive">Practica v0.0.6 is alive</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/is-prisma-better-than-your-traditional-orm">Is Prisma better than your &#x27;traditional&#x27; ORM?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/monorepo-backend">Which Monorepo is right for a Node.js BACKEND now?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/popular-nodejs-pattern-and-tools-to-reconsider">Popular Node.js patterns and tools to re-consider</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/practica-is-alive">Practica.js v0.0.1 is alive</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>2 posts tagged with &quot;javascript&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Intro: A sweet pattern that got lost in time"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/about-the-sweet-and-powerful-use-case-code-pattern">About the sweet and powerful &#x27;use case&#x27; code pattern</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-03-05T10:00:00.000Z" itemprop="datePublished">March 5, 2025</time> · <!-- -->18 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/goldbergyoni" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/goldbergyoni.png" alt="Yoni Goldberg" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/goldbergyoni" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Yoni Goldberg</span></a></div><small class="avatar__subtitle" itemprop="description">Practica.js core maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro-a-sweet-pattern-that-got-lost-in-time">Intro: A sweet pattern that got lost in time<a href="#intro-a-sweet-pattern-that-got-lost-in-time" class="hash-link" aria-label="Direct link to Intro: A sweet pattern that got lost in time" title="Direct link to Intro: A sweet pattern that got lost in time">​</a></h2><p>When was the last time you introduced a new pattern to your code? The use-case pattern is a great candidate: it&#x27;s powerful, sweet, easy to implement, and can strategically elevate your backend code quality in a short time. </p><p>The term &#x27;use case&#x27; means many different things in our industry. It&#x27;s being used by product folks to describe a user journey, mentioned by various famous architecture books to describe vague high-level concepts. this article focuses on its practical application at the <em>code level</em> by emphasizing its surprising merits how to implement it correctly.</p><p>Technically, the use-case pattern code belongs between the controller (e.g., API routes) and the business logic services (like those calculating or saving data). The use-case code is called by the controller and tells in high-level words the flow that is about to happen in a simple manner. Doing so increases the code readability, navigability, pushes complexity toward the edges, improves observability and 3 other merits that are shown below with examples.</p><p>But before we delve into its mechanics, let&#x27;s first touch on a common problem it aims to address and see some code that calls for trouble.</p><p><em>Prefer a 10 min video? Watch here, or keep reading below</em></p><iframe width="1024" height="768" src="https://www.youtube.com/embed/y4mBg920UZA?si=A_ZTVzG0AjVhzQcd" title="About the use-case code pattern" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-problem-too-many-details-too-soon">The problem: too many details, too soon<a href="#the-problem-too-many-details-too-soon" class="hash-link" aria-label="Direct link to The problem: too many details, too soon" title="Direct link to The problem: too many details, too soon">​</a></h2><p>Imagine a developer, returning to a codebase she hasn&#x27;t touched in months, tasked with fixing a bug in the &#x27;new orders flow&#x27;—specifically, an issue with price calculation in an electronic shop app.</p><p>Her journey begins promisingly smooth:</p><p><strong>- 🤗 Testing -</strong> She starts her journey off the automated tests to learn about the flow from an outside-in approach. The testing code is short and standard, as should be:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;When adding an order with 100$ product, then the price charge should be 100$ &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ....</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>- 🤗 Controller -</strong> She moves to skim through the implementation and starts from the API routes. Unsurprisingly, the Controller code is straightforward:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/api/order&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">req</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Request</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">res</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> orderService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 👈 This is where the real-work is done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Order created successfully&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Smooth sailing thus far, almost zero complexity. Typically, the controller would now hand off to a Service where the real implementation begins, she navigates into the order service to find where and how to fix that pricing bug.</p><p><strong>- 😲 The service -</strong> Suddenly! She is thrown into hundred lins of code (at best) with tons of details. She encounters classes with intricate states, inheritance hierarchies, a dependency injection framework that wire all the dependent services, and other boilerplate code. Here is a sneak peak from a real-world service, already simplified for brevity. Read it, feel it:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token maybe-class-name">DBRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">OrderService</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ServiceBase</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">OrderDto</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderRequest</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Order</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">ensureDBRepositoryInitialized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> openTelemetry</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> monitoring</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> secretManager</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> priceService</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> userService </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dependencyInjection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getVariousServices</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Add order flow starts now&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    openTelemetry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sendEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;new order&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validationRules </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getFromConfigSystem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;order-validation-rules&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validatedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> validationRules</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Invalid order&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">base</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> userService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getUserInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customerId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> savedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tryAddUserWithLegacySystem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> savedOrder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// And it goes on and on until the pricing module is mentioned</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So many details and things to learn upfront, which of them is crucial for her to learn now before dealing with her task? How can she find where is that pricing module?</p><p>She is not happy. Right off the bat, she must make herself acquaintance with a handful of product and technical narratives. She just fell off the complexity cliff: from a zero-complexity controller straight into a 1000-piece puzzle. Many of them are unrelated to her task.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-use-case-pattern">The use-case pattern<a href="#the-use-case-pattern" class="hash-link" aria-label="Direct link to The use-case pattern" title="Direct link to The use-case pattern">​</a></h2><p>In a perfect world, she would love first to get a high-level brief of the involved steps so she can understand the whole flow, and from this comfort standpoint choose where to deepen her journey. This is what this pattern is all about.</p><p>The use-case is a file with a single function that is being called by the API controller to orchestrate the various implementation services. It&#x27;s merely a simple function that enumerates and calls the code that does the actual job:</p><p><img loading="lazy" alt="A use-case code example" src="/assets/images/use-code-example-6d6c34330ad8a86f7c511123d4d5f654.png" width="1321" height="444" class="img_ev3q"></p><p>Each interaction with the system—whether it&#x27;s posting a new comment, requesting user deletion, or any other action—is managed by a dedicated use-case function. Each use-case constitutes multiple &#x27;steps&#x27; - function calls that fulfill the desired flow.</p><p>By design, it&#x27;s short, flat, no If/else, no try-catch, no algorithms, just plain calls to functions. This way, it tells the story in the simplest manner. Note how it doesn&#x27;t share too much details, but tells enough for one to understand &#x27;WHAT&#x27; is happening here and &#x27;WHO&#x27; is doing that, but not &#x27;HOW&#x27;.</p><p>But why is this minimalistic approach so crucial?</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-merits">The merits<a href="#the-merits" class="hash-link" aria-label="Direct link to The merits" title="Direct link to The merits">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-a-navigation-index">1. A navigation index<a href="#1-a-navigation-index" class="hash-link" aria-label="Direct link to 1. A navigation index" title="Direct link to 1. A navigation index">​</a></h3><p>When seeking a specific book in the local library, the visitor doesn&#x27;t have to skim through all the shelves to find a specific topic of interest. A Library, like any other information system, uses a navigational system, wayfinding signage, to highlight the path to a specific information area.</p><p><img loading="lazy" alt="Library catalog" src="/assets/images/library-catalog-37d0f18aa61b71ed77ae72a945f3c1de.webp" width="1792" height="1024" class="img_ev3q">
<em>The library catalog redirects the reader to the area of interest</em></p><p>Similarly, in software development, when a developer needs to address a particular issue—such as fixing a bug in pricing calculations—the &#x27;use case&#x27; acts like a navigational tool within the application. It serves as a hitchhiker&#x27;s guide, or the yellow pages, pinpointing exactly where to find the necessary piece of code. While other organizational strategies like modularization and folder structures offer ways to manage code, the &#x27;use case&#x27; approach provides a more focused and precise index. it shows only the relevant areas (and not 50 unrelated modules), it tells <em>when precisely</em>  this module is used, what is the <em>specific</em> entry point and which <em>exact</em> parameters are passed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-deferred-and-spread-complexity">2. Deferred and spread complexity<a href="#2-deferred-and-spread-complexity" class="hash-link" aria-label="Direct link to 2. Deferred and spread complexity" title="Direct link to 2. Deferred and spread complexity">​</a></h3><p>When a developer begins inspecting a codebase at the level of implementation services, she is immediately bombarded with intricate details. This immersion thrusts her into the depths of both product and technical complexities. Typically, she must navigate through a dependency injection system to instantiate classes, manage null states, and retrieve settings from a distributed configuration system</p><p>When the code reader&#x27;s journey starts at the level of implementation-services, she is immediately bombarded with intricate details. This immersion exposes her to both product and technical complexities right from the start. Typically, like in our example case, the code first use a dependency injection system to factor some classes, check for nulls in the state and get some values from the distributed config system - all before even starting on the primary task. This is called <em>accidental complexity</em>. Tackling complexity is one of the finest art of app design, as the code planner you can&#x27;t just eliminate complexity, but you may at least reduce the chances of someone meeting it.</p><p>Imagine your application as a tree where branches represent functions and the fruits are pockets of embedded complexity, some of which are poisoned (i.e., unnecessary complexities). Your objective is to structure this tree so that navigating through it exposes the visitor to as few poisoned fruits as possible:</p><p><img loading="lazy" alt="The blocking-complexity tree" src="/assets/images/blocking-complexity-tree-dd1cde956e00160fe4fadf67d6dd3649.jpg" width="792" height="760" class="img_ev3q">
<em>The accidental-complexity tree: A visitor aiming to reach a specific leaf must navigate through all the intervening poisoned fruits.</em></p><p>This is where the &#x27;Use Case&#x27; approach shines: by prioritizing high-level product steps and minimal technical details at the outset—a navigation system that simplifies access to various parts of the application. With this navigation tool, she can easily ignore steps that are unrelated with her work, and avoid poisoned fruits. A true strategic design win.</p><p><img loading="lazy" alt="The spread-complexity tree" src="/assets/images/deferred-complexity-tree-3407b9e6f355d2e32aacfc0bd7216de4.jpg" width="792" height="760" class="img_ev3q">
<em>The spread-complexity tree: Complexity is pushed to the periphery, allowing the reader to navigate directly to the essential fruits only.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-a-practical-workflow-that-promotes-efficiency">3. A practical workflow that promotes efficiency<a href="#3-a-practical-workflow-that-promotes-efficiency" class="hash-link" aria-label="Direct link to 3. A practical workflow that promotes efficiency" title="Direct link to 3. A practical workflow that promotes efficiency">​</a></h3><p>When embarking on a new coding flow, where do you start? After digesting the requirements and setting up some initial API routes and high-level component tests, the next logical step might be less obvious. Here&#x27;s a strategy: begin with a use-case. This approach promotes an outside-in workflow that not only streamlines development but also exposes potential risks early on.</p><p>While drafting a new use-case, you essentially map out the various steps of the process. Each step is a call to some service or repository functions, sometimes before they even exist. Effortlessly and spontaneously, these steps become your TODO list, a live document that tells not only what should be implemented rather also where risky gotchas hide. Take, for instance, this straightforward use-case for adding an order:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrderUseCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">orderRequest</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> orderWithPricing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateOrderPricing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchasingCustomer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">assertCustomerExists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderWithPricing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customerId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> savedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderWithPricing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sendSuccessEmailToCustomer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">savedOrder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchasingCustomer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This structured approach allows you to preemptively tackle potential implementation hurdles:</p><p><strong>- sendSuccessEmailToCustomer -</strong> What if you lack a necessary email service token from the Ops team? Sometimes, this demands approval and might last more than a week (believe me, I know). Acting <em>now</em>, before spending 3 days on coding, can make a big difference.</p><p><strong>- calculateOrderPricing -</strong> Reminds you to confirm pricing details with the product team—ideally before they&#x27;re out of office, avoiding delays that could impact your delivery timeline.</p><p><strong>- assertCustomerExists -</strong> This call goes to an external Microservice which belongs to the User Management team. Did they already provide an OpenAPI specification of their routes? Check your Slack now, if they didn&#x27;t yet, asking too late can prevent it from becoming a roadblock later.</p><p>Not only does this high-level thinking highlight your tasks and risks, it&#x27;s also an optimal spot to start the design from:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-the-optimal-design-viewpoint">4. The optimal design viewpoint<a href="#4-the-optimal-design-viewpoint" class="hash-link" aria-label="Direct link to 4. The optimal design viewpoint" title="Direct link to 4. The optimal design viewpoint">​</a></h3><p>Early on when initiating a use-case, the developers define the various types, functions signature, and their initial skeleton return data. This process naturally evolves into an effective design drill where the overall flow is decomposed into small units that actually fit. This sketch-out results in discovering early when puzzle pieces don&#x27;t fit while considering the underlying technologies. Here is an example, once I sketched a use-case and initially came up with these steps:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sendSuccessEmailToCustomer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">savedOrder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchasingCustomer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> orderId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> savedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderWithPricing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Going with my initial use-case above, an email is sent before the the order is saved. Soon enough the compiler yelled at me: The email function signature is not satisfied, an &#x27;Order Id&#x27; parameter is needed but to obtain one the order must be saved to DB first. I tried to change the order, unfortunately it turned out that my ORM is not returning the ID of saved entities. I&#x27;m stuck, my design struggles, at least this is realized before spending days on details. Unlike designing with papers and UML, designing with use-case brings no overhead. Moreover, unlike high-level diagrams detached from implementation realities, use-case design is grounded in the actual constraints of the technology being used.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-better-coverage-reports">5. Better coverage reports<a href="#5-better-coverage-reports" class="hash-link" aria-label="Direct link to 5. Better coverage reports" title="Direct link to 5. Better coverage reports">​</a></h3><p>Say you have 82.35% testing code coverage, are you happy and feeling confident to deploy? I&#x27;d suggest that anyone having below 100% must clarify first which code <em>exactly</em> is not covered with testing. Is this some nitty-gritty niche code or actually critical business operations that are not fully tested? Typically, answering this requires scrutinizing all the app file coverage, a daunting task.</p><p>Use-cases simplifies the coverage coverage digest: when looking directly into the use-cases folder, one gets <em>&#x27;features coverage&#x27;</em>, a unique look into which user features and steps lack testing:</p><p><img loading="lazy" alt="Use case coverage" src="/assets/images/use-case-coverage-3f223674f7783dfc904109647ad99304.png" width="1327" height="713" class="img_ev3q">
<em>The use-cases folder test coverage report, some use-cases are only partially tested</em></p><p>See how the code above has an excellent overall coverage, 82.35%. But what about the remaining 17.65% code? Looking at the report triggers a red flag: the unusual &#x27;payment-use-case&#x27; is not tested. This flow is where revenues are generated, a critical financial process which as turns out has a very low test coverage. This significant observation calls for immediate actions. Use-case coverage thus not only helps in understanding what parts of your application are tested but also prioritizes testing efforts based on business criticality rather than mere technical functionality.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-practical-domain-driven-code">6. Practical domain-driven code<a href="#6-practical-domain-driven-code" class="hash-link" aria-label="Direct link to 6. Practical domain-driven code" title="Direct link to 6. Practical domain-driven code">​</a></h3><p>The influential book &quot;Domain-Driven Design&quot; advocates for &quot;committing the team to relentlessly exercise the domain language in all communications within the team and in the code.&quot; This principle asserts that aligning code closely with product narratives fosters a common language among diverse stakeholders (e.g., product, team-leads, frontend, backend). While this sounds sensible, this advice is also a little vague - how and where should this happen?</p><p>Use-cases bring this idea down to earth: the use-case files are named after user journeys in the system (e.g., purchase-new-goods), the use-case code itself naturally describes the flow in a product language. For instance, if employees commonly use the term &#x27;cut&#x27; at the water cooler to refer to a price reduction, the corresponding use-case should employ a function named &#x27;calculatePriceCut&#x27;. This naming convention not only reinforces the domain language but also enhances mutual understanding across the team.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-consistent-observability">7. Consistent observability<a href="#7-consistent-observability" class="hash-link" aria-label="Direct link to 7. Consistent observability" title="Direct link to 7. Consistent observability">​</a></h3><p>I bet you encountered the situation when you turn the log level to &#x27;Debug&#x27; (or any other verbose mode) and gets gazillion, overwhelming, and unbearable amount of log statements. Great chances that you also met the opposite when setting the logger level to &#x27;Info&#x27; but there are also almost zero logging for that specific route that you&#x27;re looking into. It&#x27;s hard to formalize among team members when exactly each type of logging should be invoked, the result is a typical inconsistent and lacking observability.</p><p>Use-cases can drive trustworthy and consistent monitoring by taking advantage of the produced use-case steps. Since the precious work of breaking-down the flow into meaningful steps was already done (e.g., send-email, charge-credit-card), each step can produce the desired level of logging. For example, one team&#x27;s approach might be to emit logger.info on a use-case start and use-case end, and then each step will emit logger.debug. Whatever the chosen specific level is, use-case steps bring consistency and automation. Put aside logging, the same can be applied with any other observability technique like OpenTelemetry to produce custom spans for every flow step.</p><p>The implementation though demands some thinking, cluttering every step with a log statement is both verbose and depends on human manual work:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ❗️Verbose use case</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrderUseCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">orderRequest</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Order</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Add order use case - Adding order starts now&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validatedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateAndCoerceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">debug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Add order use case - The order was validated&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> orderWithPricing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateOrderPricing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">debug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Add order use case - The order pricing was decided&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchasingCustomer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">assertCustomerHasEnoughBalance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderWithPricing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">debug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Add order use case - Verified the user balance already&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchasingCustomer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> returnOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mapFromRepositoryToDto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchasingCustomer </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> unknown </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> </span><span class="token maybe-class-name">OrderRecord</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Add order use case - About to return result&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> returnOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> returnOrder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>One way around this is creating a step wrapper function that makes it observable. This wrapper function will get called for each step:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> openTelemetry </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@opentelemetry&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">runUseCaseStep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">stepName</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> stepFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">debug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Use case step </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">stepName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> starts now</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Create Open Telemetry custom span</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  openTelemetry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startSpan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stepName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">stepFunction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now the use-case gets automated and consistent transparency:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrderUseCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">orderRequest</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 🖼 This is a use case - the story of the flow. Only simple, flat and high-level code is allowed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validatedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">runUseCaseStep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Validation&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> validateAndCoerceOrder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> orderWithPricing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">runUseCaseStep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Calculate price&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> calculateOrderPricing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">runUseCaseStep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Send email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sendSuccessEmailToCustomer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> orderWithPricing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code is a little simplified, in real-world wrapper you&#x27;ll have to put try-catch and cover other corner cases, but it makes the point: each step is a meaningful milestone in the user&#x27;s journey that gets <em>automated and consistent</em> observability.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-best-practices">Implementation best practices<a href="#implementation-best-practices" class="hash-link" aria-label="Direct link to Implementation best practices" title="Direct link to Implementation best practices">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-dead-simple-no-code">1. Dead-simple &#x27;no code&#x27;<a href="#1-dead-simple-no-code" class="hash-link" aria-label="Direct link to 1. Dead-simple &#x27;no code&#x27;" title="Direct link to 1. Dead-simple &#x27;no code&#x27;">​</a></h3><p>Since use-cases are mostly about zero complexity, use no code constructs but flat calls to functions. No If/Else, no switch, no try/catch, nothing, only a simple list of steps. While ago I decided to put <em>only one</em> If/Else in a use-case: </p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrderUseCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">orderRequest</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validatedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateAndCoerceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchasingCustomer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">assertCustomerHasEnoughBalance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchasingCustomer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isPremium</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">//❗️</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sendEmailToPremiumCustomer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchasingCustomer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// This easily will grow with time to multiple if/else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A month later when I visited the code above there were already three nested If/elses. Year from now the function above will host a typical imperative code with many nested branches. Avoid this slippery road by putting a very strict border, put the conditions within the step functions:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrderUseCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">orderRequest</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validatedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateAndCoerceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchasingCustomer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">assertCustomerHasEnoughBalance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sendEmailIfPremiumCustomer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchasingCustomer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//🙂</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-find-the-right-level-of-specificity">2. Find the right level of specificity<a href="#2-find-the-right-level-of-specificity" class="hash-link" aria-label="Direct link to 2. Find the right level of specificity" title="Direct link to 2. Find the right level of specificity">​</a></h3><p>The finest art of a great use case is finding the right level of details. At this early stage, the reader is like a traveler who uses the map to get some sense of the area, or find a specific road. Definitely not learn about every road in the country. On the other hand, a good map doesn&#x27;t show only the main highway and nothing else. For example, the following use-case is too short and vague:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrderUseCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">orderRequest</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validatedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateAndCoerceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> finalOrderToSave </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">applyAllBusinessLogic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">//🤔</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">finalOrderToSave</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code above doesn&#x27;t tell a story, neither eliminate some paths from the journey. Conversely, the following code is doing better in telling the story brief:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrderUseCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">orderRequest</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validatedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateAndCoerceOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pricedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculatePrice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchasingCustomer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">assertCustomerHasEnoughBalance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderWithPricing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> orderWithShippingInstructions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addShippingInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pricedOrder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchasingCustomer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderWithShippingInstructions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Things get a little more challenging when dealing with long flows. What if there a handful of important steps, say 20? what if multiple use-case have a lot of repetition and shared step? Consider the case where &#x27;admin approval&#x27; is a multi-step process which is invoked by a handful of different use-cases? When facing this, consider breaking-down into multiple use-cases where one is allowed to call the other.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-when-have-no-choice-control-the-db-transaction-from-the-use-case">3. When have no choice, control the DB transaction from the use-case<a href="#3-when-have-no-choice-control-the-db-transaction-from-the-use-case" class="hash-link" aria-label="Direct link to 3. When have no choice, control the DB transaction from the use-case" title="Direct link to 3. When have no choice, control the DB transaction from the use-case">​</a></h3><p>What if step 2 and step 5 both deal with data and must be atomic (fail or succeed together)? Typically you&#x27;ll handle this with DB transactions, but since each step is discrete, how can a transaction be shared among the coupled steps?</p><p>If the steps take place one after the other, it makes sense to let the downstream service/repository handle them together and abstract the transaction from the use-case. What if the atomic steps are not consecutive? In this case, though not ideal, there is no escape from making the use-case acquaintance with a transaction object:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOrderUseCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">orderRequest</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">OrderRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 🖼 This is a use case - the story of the flow. Only simple, flat and high-level code is allowed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> transaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchasingCustomer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">assertCustomerHasEnoughBalance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> orderWithPricing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateOrderPricing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchasingCustomer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> savedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">insertOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderWithPricing</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> returnOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mapFromRepositoryToDto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">savedOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">commitTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">transaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> returnOrder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-aggregate-small-use-cases-in-a-single-file">4. Aggregate small use-cases in a single file<a href="#4-aggregate-small-use-cases-in-a-single-file" class="hash-link" aria-label="Direct link to 4. Aggregate small use-cases in a single file" title="Direct link to 4. Aggregate small use-cases in a single file">​</a></h3><p>A use-case file is created per user-flow that is triggered from an API route. This model make sense for significant flows, how about small operations like getting an order by id? A &#x27;get-order-by-id&#x27; use case is likely to have 1 line of code, seems like an unnecessary overhead to create a use-case file for every small request. In this case, consider aggregating multiple operations under a single conceptual use-case file. Here below for example, all the order queries co-live under the query-orders use-case file:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// query-orders-use-cases.ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 🖼 This is a use case - the story of the flow. Only simple, flat and high-level code is allowed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> orderRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getOrderByID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAllOrders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">criteria</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 🖼 This is a use case - the story of the flow. Only simple, flat and high-level code is allowed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> orderRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">queryOrders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">criteria</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="closing-easy-to-start-use-everywhere">Closing: Easy to start, use everywhere<a href="#closing-easy-to-start-use-everywhere" class="hash-link" aria-label="Direct link to Closing: Easy to start, use everywhere" title="Direct link to Closing: Easy to start, use everywhere">​</a></h2><p>If you find it valuable, you&#x27;ll also get great return for your modest investment: No fancy tooling is needed, the learning time is close to zero (in fact, you just read one of the longest article on this matter...). There is also no need to refactor a whole system rather gradually implement per-feature.</p><p>Once you become accustomed to using it, you&#x27;ll find that this technique extends well beyond API routes. It&#x27;s equally beneficial for managing message queues subscriptions and scheduled jobs. Backend-aside, use it as the facade of every module or library - the code that is being called by the entry file and orchestrates the internals. The same idea can be applied in Frontend as well: declare the core actors at the component top level. Without implementation details, just put the reference to the component&#x27;s event handlers and hooks - now the reader knows about the key events that will drive this component.</p><p>You might think this all sounds remarkably straightforward—and it is. My apologies, this article wasn&#x27;t about cutting-edge technologies. Neither did it cover shiny new dev toolings or AI-based rocket-science. In a land where complexity is the key enemy, simple ideas can be more impactful than sophisticated tooling and the Use-case is a powerful and sweet pattern that meant to live in every piece of software.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/node-js">node.js</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/use-case">use-case</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/clean-architecture">clean-architecture</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/javascript">javascript</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/tdd">tdd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/workflow">workflow</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/domain">domain</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="What&#x27;s special about this article?"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/a-compilation-of-outstanding-testing-articles-with-javaScript">A compilation of outstanding testing articles (with JavaScript)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-08-06T10:00:00.000Z" itemprop="datePublished">August 6, 2023</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/goldbergyoni" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/goldbergyoni.png" alt="Yoni Goldberg" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/goldbergyoni" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Yoni Goldberg</span></a></div><small class="avatar__subtitle" itemprop="description">Practica.js core maintainer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-special-about-this-article">What&#x27;s special about this article?<a href="#whats-special-about-this-article" class="hash-link" aria-label="Direct link to What&#x27;s special about this article?" title="Direct link to What&#x27;s special about this article?">​</a></h2><p>As a testing consultant, I read tons of testing articles throughout the years. The majority is nice-to-read, casual pieces of content which not always worth your precious time. Once in a while, not very often, I landed on an article that was <em>shockingly good</em> and could genuinely improve your test writing skills. I&#x27;ve cherry-picked these outstanding articles for you, and added my abstract nearby. Half of these articles are related directly to JavaScript/Node.js, the second half covers ubiquitous testing concepts that are applicable in every language</p><p>Why did I find these articles to be outstanding? First, the writing quality is excellent. Second, they deal with the &#x27;new world of testing&#x27;, not the commonly known &#x27;TDD-ish&#x27; stuff but rather modern concepts and tooling</p><p>Too busy to read them all? Search for articles that are decorated with a medal 🏅, these are a true masterpiece pieces of content that you never wanna miss</p><p><strong>Before we start:</strong> If you haven&#x27;t heard, I launched my comprehensive Node.js testing course a week ago  (<a href="https://testjavascript.com/curriculum2/" target="_blank" rel="noopener noreferrer">curriculum here</a>). There are less than 48 hours left for the <a href="https://courses.testjavascript.com/p/node-js-javascript-testing-from-a-to-z" target="_blank" rel="noopener noreferrer">🎁 special launch deal</a></p><p>Here they are, 10 outstanding testing articles:</p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-1-selective-unit-testing--costs-and-benefits">📄 1. &#x27;Selective Unit Testing – Costs and Benefits&#x27;<a href="#-1-selective-unit-testing--costs-and-benefits" class="hash-link" aria-label="Direct link to 📄 1. &#x27;Selective Unit Testing – Costs and Benefits&#x27;" title="Direct link to 📄 1. &#x27;Selective Unit Testing – Costs and Benefits&#x27;">​</a></h2><p><strong>✍️ Author:</strong> Steve Sanderson</p><p><strong>🔖 Abstract:</strong> We all found ourselves at least once in the ongoing and flammable discussion about &#x27;units&#x27; vs &#x27;integration&#x27;. This articles delve into a greater level of specificity and discuss WHEN unit test shine by considering the costs of writing these tests under <em>various scenarios</em>. Many treat their testing strategy as a static model - a testing technique they always write regardless of the context. &quot;Always write unit tests against functions&quot;, &quot;Write mostly integration tests&quot; are a type of arguments often heard. Conversely, this article suggests that the attractiveness of unit tests should be evaluated based on the <em>costs and benefits per module</em>. The article classifies multiple scenarios where the net value of unit tests is high or low, for example:</p><blockquote><p>If your code is basically obvious – so at a glance you can see exactly what it does – then additional design and verification (e.g., through unit testing) yields extremely minimal benefit, if any</p></blockquote><p>The author also puts a 2x2 model to visualize when the attractiveness of unit tests is high or low</p><p><img loading="lazy" alt="When unit shines" src="/assets/images/selective-unit-tests-b5303f3a425ab038c9aede3d14214abc.png" width="453" height="328" class="img_ev3q"></p><p>Side note, not part of the article: Personally I (Yoni) always start with component tests, outside-in, cover first the high-level user flow details (a.k.a <a href="https://www.crispy-engineering.com/p/why-test-diamond-model-makes-sense" target="_blank" rel="noopener noreferrer">the testing diamond</a>). Then later once I have functions, I add unit tests based on their net value. This article helped me a lot in classifying and evaluating the benefits of units in various scenarios</p><p><strong>👓 Read time:</strong> 9 min (1850 words)</p><p><strong>🔗 Link:</strong> <a href="https://blog.stevensanderson.com/2009/11/04/selective-unit-testing-costs-and-benefits/" target="_blank" rel="noopener noreferrer">https://blog.stevensanderson.com/2009/11/04/selective-unit-testing-costs-and-benefits/</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-2-testing-implementation-details-javascript-example">📄 2. &#x27;Testing implementation details&#x27; (JavaScript example)<a href="#-2-testing-implementation-details-javascript-example" class="hash-link" aria-label="Direct link to 📄 2. &#x27;Testing implementation details&#x27; (JavaScript example)" title="Direct link to 📄 2. &#x27;Testing implementation details&#x27; (JavaScript example)">​</a></h2><p><strong>✍️ Author:</strong> Kent C Dodds</p><p><strong>🔖 Abstract:</strong> The author outlines with a code example the unavoidable tragic faith of a tester who assert on implementation details. Put aside the effort in testing so many details, going this route always end with &#x27;false positive&#x27; and &#x27;false negative&#x27; that clouds the tests reliability. The article illustrate this with a frontend code example but the lesson takeaway is ubiquitous to any kind of testing</p><blockquote><p>&quot;There are two distinct reasons that it&#x27;s important to avoid testing implementation details. Tests which test implementation details: </p><ol><li>Can break when you refactor application code. <em>False negatives</em></li><li>May not fail when you break application code. <em>False positives</em>&quot;</li></ol></blockquote><p>p.s. This author has another outstanding post about a modern testing strategy, checkout this one as well - <a href="https://kentcdodds.com/blog/write-tests" target="_blank" rel="noopener noreferrer">&#x27;Write tests. Not too many. Mostly integration&#x27;</a></p><p><strong>👓 Read time:</strong> 13 min (2600 words)</p><p><strong>🔗 Link:</strong> <a href="https://kentcdodds.com/blog/testing-implementation-details" target="_blank" rel="noopener noreferrer">https://kentcdodds.com/blog/testing-implementation-details</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-3-testing-microservices-the-sane-way">📄 3. &#x27;Testing Microservices, the sane way&#x27;<a href="#-3-testing-microservices-the-sane-way" class="hash-link" aria-label="Direct link to 📄 3. &#x27;Testing Microservices, the sane way&#x27;" title="Direct link to 📄 3. &#x27;Testing Microservices, the sane way&#x27;">​</a></h2><p>🏅 This is a masterpiece</p><p><strong>✍️ Author:</strong> Cindy Sridharan</p><p><strong>🔖 Abstract:</strong> This one is the entire Microservices and distributed modern testing bible packed in a single long article that is also super engaging. I remember when came across it four years ago, winter time, I spent an hour everyday under my blanket before sleep with a smile is spread over my face. I clicked on every link, pause after every paragraph to think - a whole new world was opening in front of me. In fact, it was so fascinating that it made me want to specialize in this domain. Fast forward, years later, this is a major part of my work and I enjoy every moment</p><p>This paper starts by explaining why E2E, unit tests and explanatory QA will fall short in a distributed environment. Not only this, why any kind of coded test won&#x27;t be enough and a rich toolbox of techniques is needed. It goes through a handful of modern testing techniques that are unfamiliar to most developers. One of its key parts deal with what should be the canonical developer&#x27;s testing technique: the author advocates for &quot;big unit tests&quot; (i.e., component tests) as it strikes a great balance between developers comfort and realism</p><blockquote><p>I coined the term “step-up testing”, the general idea being to test at one layer above what’s generally advocated for. Under this model, unit tests would look more like integration tests (by treating I/O as a part of the unit under test within a bounded context), integration testing would look more like testing against real production, and testing in production looks more like, well, monitoring and exploration. The restructured test pyramid (test funnel?) for distributed systems would look like the following:</p></blockquote><p><img loading="lazy" alt="When unit shines" src="/assets/images/spectrum-of-testing-16da74a9b2c05eee95923f75e09bc713.png" width="546" height="409" class="img_ev3q"></p><p>Beyond its main scope, whatever type of system you are dealing with - this article will broaden yours perspective on testing and expose you to many new ideas that are highly applicable</p><p><strong>👓 Read time:</strong> &gt; 2 hours (10,500 words with many links)</p><p><strong>🔗 Link:</strong> <a href="https://copyconstruct.medium.com/testing-microservices-the-sane-way-9bb31d158c16" target="_blank" rel="noopener noreferrer">https://copyconstruct.medium.com/testing-microservices-the-sane-way-9bb31d158c16</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-4-how-to-unit-test-with-nodejs-javascript-examples-for-beginners">📄 4. &#x27;How to Unit Test with Node.js?&#x27; (JavaScript examples, for beginners)<a href="#-4-how-to-unit-test-with-nodejs-javascript-examples-for-beginners" class="hash-link" aria-label="Direct link to 📄 4. &#x27;How to Unit Test with Node.js?&#x27; (JavaScript examples, for beginners)" title="Direct link to 📄 4. &#x27;How to Unit Test with Node.js?&#x27; (JavaScript examples, for beginners)">​</a></h2><p><strong>✍️ Author:</strong> Ryan Jones</p><p><strong>🔖 Abstract:</strong> <em>One single recommendation for beginners:</em> Any other article on this list covers advanced testing. This article, and only this one, is meant for testing newbies who are looking to take their first practical steps in this world</p><p>This tutorial was chosen from a handful of other alternatives because it&#x27;s well-written and also relatively comprehensive. It covers the first steps &#x27;kata&#x27; that a beginner should learn first about: the test anatomy syntax, test runners CLI, assertions and asynchronous tests. Goes without words, this knowledge won&#x27;t be sufficient for covering a real-world app with testing, but it gets you safely to the next phase. My personal advice: after reading this one, your next step is learning about <a href="https://www.testim.io/blog/sinon-js-tutorial/" target="_blank" rel="noopener noreferrer">test doubles (mocking)</a></p><p><strong>👓 Read time:</strong> 16 min (3000 words)</p><p><strong>🔗 Link:</strong> <a href="https://medium.com/serverlessguru/how-to-unit-test-with-nodejs-76967019ba56" target="_blank" rel="noopener noreferrer">https://medium.com/serverlessguru/how-to-unit-test-with-nodejs-76967019ba56</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-5-unit-test-fetish">📄 5. &#x27;Unit test fetish&#x27;<a href="#-5-unit-test-fetish" class="hash-link" aria-label="Direct link to 📄 5. &#x27;Unit test fetish&#x27;" title="Direct link to 📄 5. &#x27;Unit test fetish&#x27;">​</a></h2><p><strong>✍️ Author:</strong> Martin Sústrik</p><p><strong>🔖 Abstract:</strong> The article opens with &#x27;I hear that prople feel an uncontrollable urge to write unit tests nowaydays. If you are one of those affected, spare few minutes and consider these reasons for NOT writing unit tests&#x27;. Despite these words, the article is not against unit tests as a principle rather highlights when &amp; where unit tests fall short. In these cases, other techniques should be considered. Here is an example: Unit tests inherently have lower return on investment, the author comes with a sounding analogy for this: &#x27;If you are painting a house, you want to start with a biggest brush at hand and spare the tiny brush for the end to deal with fine details. If you begin your QA work with unit tests, you are essentially trying to paint entire house using the finest chinese calligraphy brush...&#x27;</p><p><strong>👓 Read time:</strong> 5 min (1000 words)</p><p><strong>🔗 Link:</strong> <a href="https://250bpm.com/blog:40/" target="_blank" rel="noopener noreferrer">https://250bpm.com/blog:40/</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-6-mocking-is-a-code-smell-javascript-examples">📄 6. &#x27;Mocking is a Code Smell&#x27; (JavaScript examples)<a href="#-6-mocking-is-a-code-smell-javascript-examples" class="hash-link" aria-label="Direct link to 📄 6. &#x27;Mocking is a Code Smell&#x27; (JavaScript examples)" title="Direct link to 📄 6. &#x27;Mocking is a Code Smell&#x27; (JavaScript examples)">​</a></h2><p><strong>✍️ Author:</strong> Eric Elliott</p><p><strong>🔖 Abstract:</strong> Most of the articles here belong more to the &#x27;modern wave of testing&#x27;, here is something more &#x27;classic&#x27; and appealing to TDD lovers or just anyone with a need to write unit tests. This article is about HOW to reduce the number of mocking (test doubles) in your tests. Not only because mocking is an overhead in test writing, also because they hint that something might be wrong. In other words, mocking is not definitely wrong and must be fixed right away but <em>many</em> mocking are a sign of something not ideal. Consider a module that inherits from many others, or a chatty one that collaborates with a handful of other modules to do its job - testing and changing this structure is a burden:</p><blockquote><p>&quot;Mocking is required when our decomposition strategy has failed&quot;</p></blockquote><p>The author goes through a various of techniques to design more autonomous units like using pure functions by isolating side-effects from the rest of the program logic, using pub/sub, isolating I/O, composing units with patterns like monadic compositions, and some more</p><p>The overall article tone is balanced. In some parts, it encourages functional programming and techniques that are far from the mainstream - consider reading these few parts with a grain of salt</p><p><strong>👓 Read time:</strong> 32 min (6,300 words)</p><p><strong>🔗 Link:</strong> <a href="https://medium.com/javascript-scene/mocking-is-a-code-smell-944a70c90a6a" target="_blank" rel="noopener noreferrer">https://medium.com/javascript-scene/mocking-is-a-code-smell-944a70c90a6a</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-7-why-good-developers-write-bad-unit-tests">📄 7. &#x27;Why Good Developers Write Bad Unit Tests&#x27;<a href="#-7-why-good-developers-write-bad-unit-tests" class="hash-link" aria-label="Direct link to 📄 7. &#x27;Why Good Developers Write Bad Unit Tests&#x27;" title="Direct link to 📄 7. &#x27;Why Good Developers Write Bad Unit Tests&#x27;">​</a></h2><p>🏅 This is a masterpiece</p><p><strong>✍️ Author:</strong> Michael Lynch</p><p><strong>🔖 Abstract:</strong> I love this one so much. The author exemplifies how <em>unexpectedly</em> it is sometimes the good developers with their great intentions who write bad tests:</p><blockquote><p>Too often, software developers approach unit testing with the same flawed thinking... They mechanically apply all the “rules” they learned in production code without examining whether they’re appropriate for tests. As a result, they build skyscrapers at the beach</p></blockquote><p>Concrete code examples show how the test readability deteriorates once we apply &#x27;sky scrapper&#x27; thinking and how to keep it simple. In one part, he demonstrates how violating the DRY principle thoughtfully allows the reader to stay within the test while still keeping the code maintainable. This article alone, in 11 minutes, can greatly improve the tests of developers who tend to write sophisticated tests. If you have someone like this in your team, you now know what to do</p><p><strong>👓 Read time:</strong> 11 min (2,2000 words)</p><p><strong>🔗 Link:</strong> <a href="https://mtlynch.io/good-developers-bad-tests/" target="_blank" rel="noopener noreferrer">https://mtlynch.io/good-developers-bad-tests/</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-8-an-overview-of-javascript-testing-in-2022-javascript-examples">📄 8. &#x27;An Overview of JavaScript Testing in 2022&#x27; (JavaScript examples)<a href="#-8-an-overview-of-javascript-testing-in-2022-javascript-examples" class="hash-link" aria-label="Direct link to 📄 8. &#x27;An Overview of JavaScript Testing in 2022&#x27; (JavaScript examples)" title="Direct link to 📄 8. &#x27;An Overview of JavaScript Testing in 2022&#x27; (JavaScript examples)">​</a></h2><p><strong>✍️ Author:</strong> Vitali Zaidman</p><p><strong>🔖 Abstract:</strong> This paper is unique here as it doesn&#x27;t cover a single topic rather being a rundown of (almost) all JavaScript testing tools. This allows you to enrich the toolbox in your mind, and have more screwdrivers for more type of screws. For example, knowing that there are IDE extensions that shows coverage information right within the code might help you boost the tests adoption in the team, if needed. Knowing that there are solid, free, and open source visual regression tools might encourage you to dip your toes in this water, to name a few examples.</p><blockquote><p>&quot;We reviewed the most trending testing strategies and tools in the web development community and hopefully made it easier for you to test your sites. In the end, the best decisions regarding application architecture today are made by understanding general patterns that are trending in the very active community of developers, and combining them with your own experience and the characteristics of your application.&quot;</p></blockquote><p> The author was also kind enough to leave pros/cons nearby most tools so the reader can quickly get a sense of how the various options stack with each other. The article covers categories like assertion libraries, test runners, code coverage tools, visual regression tools, E2E suits and more</p><p><strong>👓 Read time:</strong> 37 min (7,400 words)</p><p><strong>🔗 Link:</strong> <a href="https://medium.com/welldone-software/an-overview-of-javascript-testing-7ce7298b9870" target="_blank" rel="noopener noreferrer">https://medium.com/welldone-software/an-overview-of-javascript-testing-7ce7298b9870</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-9-testing-in-production-the-safe-way">📄 9. Testing in Production, the safe way<a href="#-9-testing-in-production-the-safe-way" class="hash-link" aria-label="Direct link to 📄 9. Testing in Production, the safe way" title="Direct link to 📄 9. Testing in Production, the safe way">​</a></h2><p><strong>✍️ Author:</strong> Cindy Sridharan</p><p><strong>🔖 Abstract:</strong> &#x27;Testing in production&#x27; is a provocative term that sounds like a risky and careless approach of testing over production instead of verifying the delivery beforehand (yet another case of bad testing terminology). In practice, testing in production doesn&#x27;t replace coding-time testing, it just add <em>additional</em> layer of confidence by <em>safely</em> testing in 3 more phases: deployment, release and post-release. This comprehensive article covers dozens of techniques, some are unusual like traffic shadowing, tap compare and more. More than anything else, it illustrates an holistic testing workflow, build confidence cumulatively from developer machine until the new version is serving users in production</p><blockquote><p>I’m more and more convinced that staging environments are like mocks - at best a pale imitation of the genuine article and the worst form of confirmation bias. </p></blockquote><blockquote><p>It’s still better than having nothing - but “works in staging” is only one step better than “works on my machine”.</p></blockquote><p><img loading="lazy" alt="Testing in production" src="/assets/images/the-3-phases-06497437466da49c00ce842bb19d7a6d.jpeg" width="680" height="480" class="img_ev3q"></p><p><strong>👓 Read time:</strong> 54 min (10,725 words)</p><p><strong>🔗 Link:</strong> <a href="https://copyconstruct.medium.com/testing-in-production-the-safe-way-18ca102d0ef1" target="_blank" rel="noopener noreferrer">https://copyconstruct.medium.com/testing-in-production-the-safe-way-18ca102d0ef1</a></p><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-10-please-dont-mock-me-javascript-examples-from-jsconf">📄 10. &#x27;Please don&#x27;t mock me&#x27; (JavaScript examples, from JSConf)<a href="#-10-please-dont-mock-me-javascript-examples-from-jsconf" class="hash-link" aria-label="Direct link to 📄 10. &#x27;Please don&#x27;t mock me&#x27; (JavaScript examples, from JSConf)" title="Direct link to 📄 10. &#x27;Please don&#x27;t mock me&#x27; (JavaScript examples, from JSConf)">​</a></h2><p>🏅 This is a masterpiece</p><p><strong>✍️ Author:</strong> Justin Searls </p><p><strong>🔖 Abstract:</strong> This fantastic YouTube deals with the Achilles heel of testing: where exactly to mock. The dilemma where to end the test scope, what should be mocked and what&#x27;s not - is presumably the most strategic test design decision. Consider for example having module A which interacts with module B. If you isolate A by mocking B, A will always pass, even when B&#x27;s interface has changed and A&#x27;s code didn&#x27;t follow. This makes A&#x27;s tests highly stable but... production will fail in hours. In his talk Justin says:</p><blockquote><p>&quot;A test that never fails is a bad test because it doesn&#x27;t tell you anything. Design tests to fail&quot;</p></blockquote><p>Then he goes and tackle many other interesting mocking crossroads, with beautiful visuals, tons of insights. Please don&#x27;t miss this one</p><p><strong>👓 Read time:</strong> 39 min</p><p><strong>🔗 Link:</strong> <a href="https://www.youtube.com/watch?v=x8sKpJwq6lY&amp;list=PL1CRgzydk3vzk5nMZNLTODfMartQQzInE&amp;index=148" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=x8sKpJwq6lY&amp;list=PL1CRgzydk3vzk5nMZNLTODfMartQQzInE&amp;index=148</a></p><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-shameless-plug-my-articles">📄 Shameless plug: my articles<a href="#-shameless-plug-my-articles" class="hash-link" aria-label="Direct link to 📄 Shameless plug: my articles" title="Direct link to 📄 Shameless plug: my articles">​</a></h3><p>Here are a few articles that I wrote, obviously I don&#x27;t &#x27;recommend&#x27; my own craft, just checking modestly whether they appeal to you. Together, these articles gained 25,000 GitHub stars, maybe you&#x27;ll find one of them them useful?</p><ul><li><a href="https://github.com/testjavascript/nodejs-integration-tests-best-practices" target="_blank" rel="noopener noreferrer">Node.js testing - beyond the basics</a></li><li><a href="https://github.com/goldbergyoni/javascript-testing-best-practices" target="_blank" rel="noopener noreferrer">50+ JavaScript testing best practices</a></li><li><a href="https://yonigoldberg.medium.com/fighting-javascript-tests-complexity-with-the-basic-principles-87b7622eac9a" target="_blank" rel="noopener noreferrer">Writing clean JavaScript tests</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-bonus-some-other-great-testing-content">🎁 Bonus: Some other great testing content<a href="#-bonus-some-other-great-testing-content" class="hash-link" aria-label="Direct link to 🎁 Bonus: Some other great testing content" title="Direct link to 🎁 Bonus: Some other great testing content">​</a></h3><p>These articles are also great, some are highly popular:</p><ul><li><a href="https://www.youtube.com/watch?v=5pwv3cuo3Qk" target="_blank" rel="noopener noreferrer">Property-Based Testing for everyone</a></li><li><a href="https://www.hillelwayne.com/post/metamorphic-testing/" target="_blank" rel="noopener noreferrer">METAMORPHIC TESTING</a></li><li><a href="https://medium.com/@eugenkiss/lean-testing-or-why-unit-tests-are-worse-than-you-think-b6500139a009" target="_blank" rel="noopener noreferrer">Lean Testing or Why Unit Tests are Worse than You Think</a></li><li><a href="https://martinfowler.com/articles/microservice-testing/?utm_source=pocket_saves" target="_blank" rel="noopener noreferrer">Testing Strategies in a Microservice Architecture</a></li><li><a href="https://kentbeck.github.io/TestDesiderata/" target="_blank" rel="noopener noreferrer">Test Desiderata</a></li><li><a href="https://dhh.dk/2014/tdd-is-dead-long-live-testing.html" target="_blank" rel="noopener noreferrer">TDD is dead. Long live testing</a></li><li><a href="https://dhh.dk/2014/test-induced-design-damage.html" target="_blank" rel="noopener noreferrer">Test-induced-design-damage</a></li><li><a href="https://www.jamesshore.com/v2/projects/nullables/testing-without-mocks" target="_blank" rel="noopener noreferrer">testing-without-mocks</a></li><li><a href="https://blog.developer.adobe.com/testing-error-handling-in-node-js-567323397114" target="_blank" rel="noopener noreferrer">Testing Node.js error handling</a></li></ul><p>p.s. Last reminder, less than 48 hours left for my <a href="https://courses.testjavascript.com/p/node-js-javascript-testing-from-a-to-z" target="_blank" rel="noopener noreferrer">online course 🎁 special launch offer</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/node-js">node.js</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/testing">testing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/javascript">javascript</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/tdd">tdd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/unit">unit</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/integration">integration</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/practicajs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/QxuPmV5w" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/practicajs/practica" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Practica.js</div></div></div></footer></div>
<script src="/assets/js/runtime~main.aa07f8b2.js"></script>
<script src="/assets/js/main.4dff6f49.js"></script>
</body>
</html>